// Change Fonts
$(".OpenSans").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Open Sans');
  mainCanvas.renderAll();
});

$(".OpenSansCondensed").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Open Sans Condensed');
  mainCanvas.renderAll();
});

$(".Roboto").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Roboto');
  mainCanvas.renderAll();
});
$(".Kufam").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Kufam');
  mainCanvas.renderAll();
});
$(".Montserrat").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Montserrat');
  mainCanvas.renderAll();
});
$(".Oswald").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Oswald');
  mainCanvas.renderAll();
});
$(".Raleway").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Raleway');
  mainCanvas.renderAll();
});
$(".PlayfairDisplay").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Playfair Display');
  mainCanvas.renderAll();
});
$(".NotoSerif").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Noto Serif');
  mainCanvas.renderAll();
});
$(".Anton").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Anton');
  mainCanvas.renderAll();
});
$(".Arimo").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Arimo');
  mainCanvas.renderAll();
});
$(".YanoneKaffeesatz").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Yanone Kaffeesatz');
  mainCanvas.renderAll();
});
$(".Lobster").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Lobster');
  mainCanvas.renderAll();
});
$(".DancingScript").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Dancing Script');
  mainCanvas.renderAll();
});
$(".Pacifico").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Pacifico');
  mainCanvas.renderAll();
});
$(".Play").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Play');
  mainCanvas.renderAll();
});
$(".MavenPro").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Maven Pro');
  mainCanvas.renderAll();
});
$(".AlfaSlabOne").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Alfa Slab One');
  mainCanvas.renderAll();
});
$(".PlayfairDisplaySC").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Playfair Display SC');
  mainCanvas.renderAll();
});
$(".Bangers").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bangers');
  mainCanvas.renderAll();
});
$(".SigmarOne").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Sigmar One');
  mainCanvas.renderAll();
});
$(".Lalezar").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Lalezar');
  mainCanvas.renderAll();
});
$(".BalooChettan2").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Baloo Chettan 2');
  mainCanvas.renderAll();
});
$(".Trirong").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Trirong');
  mainCanvas.renderAll();
});
$(".Jura").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Jura');
  mainCanvas.renderAll();
});
$(".AlegreyaSansSC").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Alegreya Sans SC');
  mainCanvas.renderAll();
});
$(".SairaExtraCondensed").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Saira Extra Condensed');
  mainCanvas.renderAll();
});
$(".Bevan").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bevan');
  mainCanvas.renderAll();
});
$(".Bungee").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bungee');
  mainCanvas.renderAll();
});
$(".BungeeInline").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bungee Inline');
  mainCanvas.renderAll();
});
$(".BungeeShade").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bungee Shade');
  mainCanvas.renderAll();
});
$(".BungeeOutline").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bungee Outline');
  mainCanvas.renderAll();
});
$(".BungeeHairline").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Bungee Hairline');
  mainCanvas.renderAll();
});
$(".AlegreyaSC").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Alegreya SC');
  mainCanvas.renderAll();
});
$(".Maitree").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Maitree');
  mainCanvas.renderAll();
});
$(".Srisakdi").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Srisakdi');
  mainCanvas.renderAll();
});
$(".Thasadith").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Thasadith');
  mainCanvas.renderAll();
});
$(".Manuale").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Manuale');
  mainCanvas.renderAll();
});
$(".Farsan").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Farsan');
  mainCanvas.renderAll();
});
$(".Dexsarbrushregular").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Dexsar Brush Regular');
  mainCanvas.renderAll();
});
$(".Awesomescript").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Awesome Script');
  mainCanvas.renderAll();
});
$(".AmaticSC").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Amatic SC');
  mainCanvas.renderAll();
});
$(".Charmonman").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Charmonman');
  mainCanvas.renderAll();
});
$(".Charm").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Charm');
  mainCanvas.renderAll();
});
$(".Srisakdi").on("click", function(e) {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('fontFamily', 'Srisakdi');
  mainCanvas.renderAll();
});

// Change font style
var slider1 = document.getElementById("txtFonts");
var output1 = document.getElementById("demotxtFonts");
output1.value = slider1.value;
slider1.oninput = function() {
  output1.value = this.value;
}
output1.oninput = function() {
  slider1.value = this.value;
}

slider1.addEventListener('change', changefontSize, false);
output1.addEventListener('change', changefontSize, false);
function changefontSize(event){
    var objtext = mainCanvas.getActiveObject();
	var val = output1.value
  objtext.set('fontSize', val);
  mainCanvas.renderAll();
};

var slider2 = document.getElementById("txtFontw");
var output2 = document.getElementById("demotxtFontw");
output2.value = slider2.value;
slider2.oninput = function() {
  output2.value = this.value;
}
output2.oninput = function() {
  slider2.value = this.value;
}

slider2.addEventListener('change', changefontWeight, false);
output2.addEventListener('change', changefontWeight, false);
function changefontWeight(event){
    var objtext = mainCanvas.getActiveObject();
	var val = output2.value
  objtext.set('fontWeight', val);
  mainCanvas.renderAll();
}

var slider3 = document.getElementById("txtFontlh");
var output3 = document.getElementById("demotxtFontlh");
output3.value = slider3.value;
slider3.oninput = function() {
  output3.value = this.value;
}
output3.oninput = function() {
  slider3.value = this.value;
}

slider3.addEventListener('change',changelineHeight, false);
output3.addEventListener('change',changelineHeight, false);
function changelineHeight(event){
    var objtext = mainCanvas.getActiveObject();
	var val = output3.value
  objtext.set('lineHeight', val);
  mainCanvas.renderAll();
}

var slider4 = document.getElementById("txtFontchs");
var output4 = document.getElementById("demotxtFontchs");
output4.value = slider4.value;
slider4.oninput = function() {
  output4.value = this.value;
}
output4.oninput = function() {
  slider4.value = this.value;
}

slider4.addEventListener('change', changecharSpacing, false);
output4.addEventListener('change', changecharSpacing, false);
function changecharSpacing(event){
    var objtext = mainCanvas.getActiveObject();
	var val = output4.value
  objtext.set('charSpacing', val);
  mainCanvas.renderAll();
}

// Text formatting actions
var underline = document.getElementById('btn-underline');
var bold = document.getElementById('btn-bold');
var italic = document.getElementById('btn-italic');
var linethrough = document.getElementById('btn-linethrough');
var overline = document.getElementById('btn-overline');
var underoverline = document.getElementById('btn-underoverline');

underoverline.addEventListener('click', function() {
  dtEditText('underoverline');
});

overline.addEventListener('click', function() {
  dtEditText('overline');
});

linethrough.addEventListener('click', function() {
  dtEditText('linethrough');
});

underline.addEventListener('click', function() {
  dtEditText('underline');
});

bold.addEventListener('click', function() {
  dtEditText('bold');
}); 

italic.addEventListener('click', function() {
  dtEditText('italic');
}); 

// Functions
function dtEditText(action) {
    var a = action;
    var o = mainCanvas.getActiveObject();
    var t;

    // If object selected, what type?
    if (o) {
        t = o.get('type');
    }

    if (o && t === 'i-text') {
        switch(a) {
            case 'bold':				
                var isBold = dtGetStyle(o, 'fontWeight') === 'bold';
                dtSetStyle(o, 'fontWeight', isBold ? '' : 'bold');
            break;

            case 'italic':
                var isItalic = dtGetStyle(o, 'fontStyle') === 'italic';
                dtSetStyle(o, 'fontStyle', isItalic ? '' : 'italic');
            break;

            case 'underline':
                var isUnderline = dtGetStyle(o, 'textDecoration') === 'underline';
                dtSetStyle(o, 'textDecoration', isUnderline ? '' : 'underline');
            break;

            case 'overline':
                var isOverline = dtGetStyle(o, 'textDecoration') === 'overline';
                dtSetStyle(o, 'textDecoration', isOverline ? '' : 'overline');
            break;

            case 'linethrough':
                var isLinethrough = dtGetStyle(o, 'textDecoration') === 'line-through';
                dtSetStyle(o, 'textDecoration', isLinethrough ? '' : 'line-through');
            break;

            case 'underoverline':
                var isUnderOverline = dtGetStyle(o, 'textDecoration') === 'underline overline';
                dtSetStyle(o, 'textDecoration', isUnderOverline ? '' : 'underline overline');
            break;
            mainCanvas.renderAll();
        }
    }
}

// Get the style
function dtGetStyle(object, styleName) {
    return object[styleName];
}

// Set the style
function dtSetStyle(object, styleName, value) {
    object[styleName] = value;
    object.set({dirty: true});
    mainCanvas.renderAll();
}    

//End Change Font Style

$("#uppercase").click(uppercase);
function uppercase() {
	var active = mainCanvas.getActiveObject();
	if (!active) return;
  
  var text = active.text;
  active.text = text.toUpperCase();
    mainCanvas.renderAll();
}

$("#lowercase").click(lowercase);
function lowercase() {
	var active = mainCanvas.getActiveObject();
	if (!active) return;
  
  var text = active.text;
  active.text = text.toLowerCase();
    mainCanvas.renderAll();
}

$("#textaligncenter").on("click", function() {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('textAlign', 'center');
  mainCanvas.renderAll();
});

$("#textalignleft").on("click", function() {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('textAlign', 'left');
  mainCanvas.renderAll();
});

$("#textalignright").on("click", function() {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('textAlign', 'right');
  mainCanvas.renderAll();
});

$("#textalignjustify").on("click", function() {
    var objtext = mainCanvas.getActiveObject();
  objtext.set('textAlign', 'justify');
  mainCanvas.renderAll();
});

// TEXT EFFECTS 01
$("#texteffects01").on("click", function() {
    $(".tools-fonts-effects").show(300);
    $(".effects-01").show();
    $(".tools-fonts-align").hide();
    effects01();
});
    
    var be01 = document.getElementById('beffects01')
    be01.addEventListener('change', effects01, false);
    var xe01 = document.getElementById('xeffects01')
    xe01.addEventListener('change', effects01, false);
    var ye01 = document.getElementById('yeffects01')
    ye01.addEventListener('change', effects01, false);
    var oe01 = document.getElementById('oeffects01')
    oe01.addEventListener('change', effects01, false);
    var vbe01 = document.getElementById('vbeffects01')
    vbe01.addEventListener('change', effects01, false);
    var vxe01 = document.getElementById('vxeffects01')
    vxe01.addEventListener('change', effects01, false);
    var vye01 = document.getElementById('vyeffects01')
    vye01.addEventListener('change', effects01, false);
    var voe01 = document.getElementById('voeffects01')
    voe01.addEventListener('change', effects01, false);
    be01.oninput = function() {
    vbe01.value = this.value;
    }
    vbe01.oninput = function() {
    be01.value = this.value;
    }
    xe01.oninput = function() {
    vxe01.value = this.value;
    }
    vxe01.oninput = function() {
    xe01.value = this.value;
    }
    ye01.oninput = function() {
    vye01.value = this.value;
    }
    vye01.oninput = function() {
    ye01.value = this.value;
    }
    oe01.oninput = function() {
    voe01.value = this.value;
    }
    voe01.oninput = function() {
    oe01.value = this.value;
    }
    
    function effects01(event)
    {
    var valbe01 = be01.value;
    var valxe01 = xe01.value;
    var valye01 = ye01.value;
    var valoe01 = oe01.value;
    var objtext = mainCanvas.getActiveObject();
    objtext.setShadow(
        {
        color: 'rgba(245,123,120,0.3)',
        blur: valbe01,
        offsetX: valxe01,
        offsetY: valye01,
        opacity: valoe01,
        }
    );
    mainCanvas.renderAll();
};
$("#effects-01-apply").on("click", function() {
$(".tools-fonts-effects").hide();
    $(".effects-01").hide();
    $(".tools-fonts-style").hide();
});

$("#texteffects02").on("click", function() {
    (function() {
  var clipPath = new fabric.Circle({
    radius: 140,
    top: 40,
    left: 40
  });
  var rect = new fabric.Rect({
    width: 400,
    height: 400,
    fill: 'red'
  });
  rect.clipPath = clipPath;
  mainCanvas.add(rect);
})()
});
var myImg = "https://static.vecteezy.com/system/resources/thumbnails/000/833/504/original/abstract-black-background-with-shining-blue-diagonal-layers.jpg";
$("#texteffects03").on("click", function addImg(){
    fabric.Image.fromURL(myImg, function(oImg) {
        oImg.set({'left':10});
        oImg.set({'top':10});
        oImg.set({'scaleX': mainCanvas.width/oImg.width});
        oImg.set({'scaleY': mainCanvas.width/oImg.width});
        mainCanvas.add(oImg);
        });});